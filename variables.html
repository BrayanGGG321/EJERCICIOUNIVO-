<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bootcamp IO: Formulaci贸n de Problemas | UNIVO</title>

    <!-- MathJax: renderizado de LaTeX -->
    <script>
    window.MathJax = {
      tex: {
        // Permite $...$ e $$...$$ y \(..\) \[..\]
        inlineMath: [['$','$'], ['\\(','\\)']],
        displayMath: [['$$','$$'], ['\\[','\\]']],
        processEscapes: true
      },
      options: {
        // No procesar dentro de estas etiquetas (evita romper <code>, <pre>, <textarea>, etc.)
        skipHtmlTags: ['script','noscript','style','textarea','pre','code']
      }
    };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        /* --- CORE THEME: UNIVO 2026 --- */
        :root {
            --u-yellow: #F9B410;
            --u-dark: #05080D;
            --u-gray: #E7E7E7;
            --u-white: #FFFFFF;
            --u-blue-accent: #004d99; /* Acento para IO */
            --u-success: #28a745;
            --u-error: #dc3545;
        }

        * { box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--u-gray);
            color: var(--u-dark);
            margin: 0;
            padding: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* --- LAYOUT: SIDEBAR & MAIN --- */
        .sidebar {
            width: 280px;
            background-color: var(--u-dark);
            color: var(--u-white);
            display: flex;
            flex-direction: column;
            border-right: 5px solid var(--u-yellow);
        }

        .logo-area {
            padding: 20px;
            text-align: center;
            background-color: #000;
        }

        .logo-area h2 { margin: 0; color: var(--u-yellow); letter-spacing: 1px; }
        .logo-area p { margin: 5px 0 0; font-size: 0.8em; color: #aaa; }

        .nav-menu {
            flex: 1;
            padding: 20px 0;
            overflow-y: auto;
        }

        .nav-btn {
            width: 100%;
            padding: 15px 20px;
            background: none;
            border: none;
            color: #ccc;
            text-align: left;
            font-size: 1em;
            cursor: pointer;
            border-left: 4px solid transparent;
            transition: all 0.3s;
        }

        .nav-btn:hover { background-color: rgba(255,255,255,0.05); color: white; }
        
        .nav-btn.active {
            background-color: rgba(249, 180, 16, 0.1);
            color: var(--u-yellow);
            border-left-color: var(--u-yellow);
            font-weight: bold;
        }

        .progress-widget {
            padding: 20px;
            background-color: #111;
            border-top: 1px solid #333;
        }

        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
            background-color: #f4f6f8;
        }

        /* --- COMPONENTS --- */
        .container { max-width: 900px; margin: 0 auto; }

        .card {
            background: white;
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border-top: 4px solid transparent;
        }
        .card.theory { border-top-color: var(--u-blue-accent); }
        .card.practice { border-top-color: var(--u-yellow); }

        h1, h2, h3 { color: var(--u-dark); }
        .highlight { background-color: rgba(249, 180, 16, 0.3); padding: 0 5px; border-radius: 3px; }

        /* Forms & Inputs */
        .question-row {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .question-row:last-child { border-bottom: none; }
        
        select, input[type="text"], textarea {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 0.95em;
        }
        textarea { width: 100%; height: 80px; margin-top: 10px; }

        .btn-action {
            background-color: var(--u-yellow);
            color: var(--u-dark);
            border: none;
            padding: 12px 30px;
            font-size: 1em;
            font-weight: bold;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .btn-action:hover { background-color: #e0a20e; }

        /* Feedback System */
        .feedback-box {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            font-size: 0.9em;
            display: none;
        }
        .fb-correct { background-color: #d4edda; color: #155724; }
        .fb-error { background-color: #f8d7da; color: #721c24; }

        /* Progress Bar */
        .progress-track { width: 100%; height: 10px; background: #333; border-radius: 5px; margin-top: 10px; }
        .progress-fill { height: 100%; background: var(--u-yellow); width: 0%; border-radius: 5px; transition: width 0.5s; }

        /* Utility */
        .hidden { display: none; }
        .badge {
            display: inline-block; padding: 3px 8px; font-size: 0.75em; 
            border-radius: 10px; background: #eee; margin-left: 10px;
        }
    </style>
</head>
<body>

<div class="sidebar">
    <div class="logo-area">
        <h2>UNIVO | IO</h2>
        <p>Investigaci贸n de Operaciones</p>
    </div>
    <div class="nav-menu">
        <button class="nav-btn active" onclick="showSection('intro')">1. Introducci贸n y Teor铆a</button>
        <button class="nav-btn" onclick="showSection('level1')">2. Drill: Clasificaci贸n <span id="badge1" class="badge">0/20</span></button>
        <button class="nav-btn" onclick="showSection('level2')">3. Lab: Depuraci贸n <span id="badge2" class="badge">0/10</span></button>
        <button class="nav-btn" onclick="showSection('level3')">4. Casos de Negocios <span id="badge3" class="badge">0/5</span></button>
        <button class="nav-btn" onclick="showSection('final')">5. Certificaci贸n Final</button>
        <button class="nav-btn" onclick="resetProgress()" style="color: #dc3545; margin-top: 20px;">锔 Reiniciar Todo</button>
    </div>
    <div class="progress-widget">
        <small style="color: #aaa;">Progreso General</small>
        <div class="progress-track"><div class="progress-fill" id="globalProgress"></div></div>
        <div style="text-align: right; color: var(--u-yellow); font-weight: bold; margin-top: 5px;" id="percentText">0%</div>
    </div>
</div>

<div class="main-content">
    
    <div id="intro" class="container section">
        <div class="card theory">
            <h1>M贸dulo Intensivo: El Arte de Plantear Problemas</h1>
            <p>Bienvenido al Bootcamp de Formulaci贸n de Investigaci贸n de Operaciones. Este m贸dulo est谩 dise帽ado para durar aproximadamente <strong>4 horas</strong>.</p>
            <p><strong>Instrucciones:</strong> Tu progreso se guardar谩 autom谩ticamente en este navegador. No necesitas terminar todo en una sola sesi贸n.</p>
        </div>
        
        <div class="card theory">
            <h3> Lectura Obligatoria: La Anatom铆a de una Variable</h3>
            <p>En IO aplicada a negocios, una variable ($x_j$) no es un objeto, es una <strong>decisi贸n cuantificable</strong>. Debes definirla con tres apellidos:</p>
            <ol>
                <li><strong>驴Qu茅 es?</strong> (Cantidad, Porcentaje, Decisi贸n l贸gica).</li>
                <li><strong>驴De qu茅?</strong> (Sillas Modelo A, Inversi贸n en Bonos, Turno Nocturno).</li>
                <li><strong>驴Unidad de tiempo/lugar?</strong> (Por semana, Por d铆a, En la planta 1).</li>
            </ol>
            <hr>
            <h4>Tipos de Variables en Negocios:</h4>
            <ul>
                <li><strong>Continuas (L):</strong> Dinero, L铆quidos, Tiempo, Porcentajes, Kilos. Admiten decimales.</li>
                <li><strong>Enteras (I):</strong> Personas, Veh铆culos, M谩quinas, Contratos, Proyectos. No admiten decimales.</li>
                <li><strong>Binarias (B):</strong> Decisiones de "S铆/No". (1 = Construir, 0 = No construir).</li>
            </ul>
        </div>
        <button class="btn-action" onclick="showSection('level1')">Comenzar Entrenamiento</button>
    </div>

    <div id="level1" class="container section hidden">
        <div class="card practice">
            <h2>Nivel 1: Clasificaci贸n R谩pida (The Drill)</h2>
            <p>Clasifica las siguientes 20 variables operativas. Debes acertar todas para dominar el nivel.</p>
            <p><em>C = Continua | E = Entera (Discreta) | B = Binaria</em></p>
            <div id="drill-container"></div>
            <button class="btn-action" onclick="checkLevel1()">Verificar Nivel 1</button>
        </div>
    </div>

    <div id="level2" class="container section hidden">
        <div class="card practice">
            <h2>Nivel 2: Laboratorio de Depuraci贸n</h2>
            <p>Un analista junior ha formulado mal las siguientes variables. Tu trabajo es indicar <strong>POR QU</strong> est谩 mal y seleccionar la correcci贸n.</p>
            <div id="debug-container"></div>
            <button class="btn-action" onclick="checkLevel2()">Verificar Correcciones</button>
        </div>
    </div>

    <div id="level3" class="container section hidden">
        <div class="card practice">
            <h2>Nivel 3: Casos de Negocio (Business Cases)</h2>
            <p>Lee los escenarios complejos. Redacta las variables de decisi贸n. (Este m贸dulo requiere auto-evaluaci贸n honesta).</p>
            <div id="cases-container"></div>
        </div>
    </div>

    <div id="final" class="container section hidden">
        <div class="card theory" style="text-align: center;">
            <h1>Certificaci贸n de Competencias</h1>
            <p>Has completado el recorrido de entrenamiento.</p>
            <div style="font-size: 3em; margin: 20px;"></div>
            <p>Puntaje Final Acumulado: <strong id="finalScoreDisplay">0</strong> / 100</p>
            <p>Imprime esta pantalla como evidencia de tu trabajo de 4 horas.</p>
            <button class="btn-action" onclick="window.print()">Imprimir Evidencia PDF</button>
        </div>
    </div>

</div>

<script>
    // --- DATABASE DE PREGUNTAS (EXTENSA) ---
    const drillQuestions = [
        { q: "N煤mero de camiones a asignar a la Ruta 1.", type: "E" },
        { q: "Litros de leche utilizados para queso fresco.", type: "C" },
        { q: "Decisi贸n de abrir o no una sucursal en San Miguel.", type: "B" },
        { q: "Porcentaje del presupuesto invertido en Bitcoin.", type: "C" },
        { q: "Cantidad de enfermeras en turno nocturno.", type: "E" },
        { q: "Tiempo exacto de procesamiento en m谩quina A.", type: "C" },
        { q: "N煤mero de bonos del tesoro a comprar.", type: "E" },
        { q: "Asignaci贸n de un proyecto al equipo A (S铆/No).", type: "B" },
        { q: "Kigramos de harina en inventario.", type: "C" },
        { q: "Cantidad de escritorios a fabricar.", type: "E" },
        { q: "Dinero ($) gastado en publicidad.", type: "C" },
        { q: "N煤mero de vuelos comerciales diarios.", type: "E" },
        { q: "Decisi贸n de renovar contrato a proveedor X.", type: "B" },
        { q: "Metros de tela cortados.", type: "C" },
        { q: "Cantidad de pasajeros en un bus.", type: "E" },
        { q: "Temperatura del horno industrial.", type: "C" },
        { q: "N煤mero de acciones a vender.", type: "E" },
        { q: "Selecci贸n de la ruta m谩s corta (Binaria en grafos).", type: "B" },
        { q: "Horas hombre requeridas para una tarea.", type: "C" }, // Truco: las horas se fraccionan
        { q: "Cantidad de contenedores embarcados.", type: "E" }
    ];

    const debugQuestions = [
        { 
            context: "F谩brica de Zapatos", 
            bad: "x = zapatos", 
            correction: "x debe ser 'Cantidad de pares de zapatos a producir por semana'. Falta unidad y tiempo.",
            options: ["Es correcta", "Falta definir cantidad y tiempo", "Deber铆a ser Binaria"] 
        },
        { 
            context: "Inversi贸n", 
            bad: "x = Ganancia", 
            correction: "La ganancia es una CONSECUENCIA (Funci贸n Objetivo), no una DECISIN. La decisi贸n es cu谩nto invertir.",
            options: ["x es una variable de salida, no de entrada", "x deber铆a ser costos", "Est谩 bien"] 
        },
        { 
            context: "Transporte", 
            bad: "x = Cami贸n de placa AB-123", 
            correction: "No modelamos objetos espec铆ficos, sino cantidades o decisiones sobre ellos.",
            options: ["Es muy espec铆fico", "Est谩 perfecto", "Falta el color del cami贸n"] 
        },
        { 
            context: "Selecci贸n de Personal", 
            bad: "x = N煤mero de gerentes (donde x puede ser 2.5)", 
            correction: "Error de tipo: Las personas deben ser variables Enteras, no Continuas.",
            options: ["Debe ser Entera", "Debe ser Continua", "Debe ser Binaria"] 
        },
        { 
            context: "Producci贸n", 
            bad: "x = Costo de materia prima", 
            correction: "El costo es un PARAMETRO (dato conocido), no una variable.",
            options: ["Es un Par谩metro, no Variable", "Es Binaria", "Es una Restricci贸n"] 
        }
        // Se pueden agregar m谩s aqu铆 para llegar a 10
    ];

    const businessCases = [
        {
            title: "Caso 1: Mix de Medios (Marketing)",
            desc: "Tienes un presupuesto y debes decidir cu谩ntos anuncios poner en TV, Radio y Redes Sociales. Los anuncios de TV y Radio se compran por 'spot' (unidad entera), pero en Redes Sociales inviertes una cantidad de dinero continua.",
            solution: "x1: Cantidad de spots en TV (Entera)\nx2: Cantidad de spots en Radio (Entera)\nx3: D贸lares a invertir en Redes Sociales (Continua)"
        },
        {
            title: "Caso 2: Problema de la Mochila (Log铆stica)",
            desc: "Tienes un cami贸n con capacidad limitada de peso. Tienes 5 tipos de cajas posibles para cargar. Debes decidir cu谩ntas cajas de cada tipo llevar para maximizar el valor de la carga.",
            solution: "xi: Cantidad de cajas del tipo 'i' a cargar (donde i = 1,2,3,4,5).\nTipo: Enteras Positivas."
        },
        {
            title: "Caso 3: Localizaci贸n de Plantas (Estrat茅gico)",
            desc: "La UNIVO quiere abrir nuevos campus. Tiene 4 ubicaciones posibles: San Miguel, Usulut谩n, La Uni贸n, Moraz谩n. Solo tiene presupuesto para abrir 2. Debe decidir cu谩les abrir.",
            solution: "yj: Variable Binaria (1 si se abre en la ubicaci贸n j, 0 si no).\nRestricci贸n l贸gica: y1 + y2 + y3 + y4 = 2"
        },
        {
            title: "Caso 4: Dieta Hospitalaria (Nutrici贸n/Costos)",
            desc: "Un hospital debe crear una dieta mezclando Pollo, Arroz y Verduras. Debe cumplir requerimientos de vitaminas. Se busca minimizar costo.",
            solution: "xi: Gramos (o Kilos) del ingrediente 'i' a incluir en la mezcla.\nTipo: Continua (puedes servir 100.5 gramos)."
        },
        {
            title: "Caso 5: Asignaci贸n de Tareas (RRHH)",
            desc: "Tienes 3 empleados y 3 tareas. Cada empleado debe hacer exactamente una tarea. Decidir qui茅n hace qu茅.",
            solution: "xij: Variable Binaria. 1 si el empleado 'i' hace la tarea 'j', 0 si no."
        }
    ];

    // --- STATE MANAGEMENT ---
    let state = {
        l1_answers: {},
        l2_answers: {},
        l3_completed: [],
        score: 0
    };

    // --- INIT ---
    window.onload = function() {
        loadProgress();
        renderLevel1();
        renderLevel2();
        renderLevel3();
        updateUI();
    };

    function showSection(id) {
        document.querySelectorAll('.section').forEach(s => s.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        // Buscar el bot贸n correspondiente y activarlo (l贸gica simplificada)
        event.target.classList.add('active');
        window.scrollTo(0,0);
    }

    // --- RENDERING FUNCTIONS ---

    function renderLevel1() {
        const container = document.getElementById('drill-container');
        drillQuestions.forEach((item, index) => {
            container.innerHTML += `
                <div class="question-row">
                    <span>${index + 1}. ${item.q}</span>
                    <select id="l1_q${index}" onchange="saveL1(${index}, this.value)">
                        <option value="">Seleccionar...</option>
                        <option value="C">Continua</option>
                        <option value="E">Entera</option>
                        <option value="B">Binaria</option>
                    </select>
                </div>
                <div id="l1_fb${index}" class="feedback-box"></div>
            `;
        });
    }

    function renderLevel2() {
        const container = document.getElementById('debug-container');
        debugQuestions.forEach((item, index) => {
            let opts = "";
            // Mezclar opciones simple
            let allOpts = [...item.options]; // En un caso real, habr铆a que aleatorizarlas o definir cu谩l es la correcta por 铆ndice
            // Para simplificar este demo, asumiremos que la Opci贸n 0 es la correcta en el array 'options' del objeto, 
            // pero vamos a renderizar botones.
            
            // *Correcci贸n para la l贸gica del demo*: Vamos a asumir que la respuesta correcta es la que coincide l贸gicamente.
            // En este c贸digo simplificado, definiremos la correcta como la opci贸n 0 o 1 seg煤n el caso.
            // Para hacerlo robusto: Vamos a hacer que el usuario ELIJA la raz贸n.
            
            // Re-mapeo r谩pido para el ejemplo:
            // Q1 Correct: "Falta definir..." (Index 1)
            // Q2 Correct: "x es variable de salida..." (Index 0)
            // Q3 Correct: "Es muy espec铆fico" (Index 0)
            // Q4 Correct: "Debe ser Entera" (Index 0)
            // Q5 Correct: "Es un Par谩metro..." (Index 0)
            
            container.innerHTML += `
                <div class="card" style="background:#f9f9f9;">
                    <h4>${index+1}. Contexto: ${item.context}</h4>
                    <p class="highlight" style="display:inline-block;">Definici贸n Mala: "${item.bad}"</p>
                    <p>驴Cu谩l es el error?</p>
                    <select id="l2_q${index}" style="width:100%">
                        <option value="">-- Diagn贸stico --</option>
                        ${item.options.map(o => `<option value="${o}">${o}</option>`).join('')}
                    </select>
                    <div id="l2_fb${index}" class="feedback-box"></div>
                </div>
            `;
        });
    }

    function renderLevel3() {
        const container = document.getElementById('cases-container');
        businessCases.forEach((item, index) => {
            container.innerHTML += `
                <div class="card" style="border-left: 5px solid var(--u-blue-accent);">
                    <h3>${item.title}</h3>
                    <p>${item.desc}</p>
                    <textarea id="case_${index}" placeholder="Define las variables (x1, x2...)..."></textarea>
                    <button class="btn-action" style="padding: 5px 15px; font-size: 0.8em; margin-top:5px;" onclick="revealCase(${index})">Autoevaluar</button>
                    <div id="case_fb_${index}" class="feedback-box" style="background: #e2e6ea; border: 1px solid #cbd5e0;">
                        <strong>Soluci贸n Experta:</strong><br>
                        <pre style="white-space: pre-wrap;">${item.solution}</pre>
                        <p><em>Si tu respuesta se parece, date por satisfecho.</em></p>
                    </div>
                </div>
            `;
        });
    }

    // --- LOGIC CHECKS ---

    function checkLevel1() {
        let correctCount = 0;
        drillQuestions.forEach((item, index) => {
            const val = document.getElementById(`l1_q${index}`).value;
            const fb = document.getElementById(`l1_fb${index}`);
            fb.style.display = 'block';
            
            if(val === item.type) {
                correctCount++;
                fb.className = 'feedback-box fb-correct';
                fb.innerText = "隆Correcto!";
            } else {
                fb.className = 'feedback-box fb-error';
                fb.innerText = `Incorrecto. Era ${item.type === 'C' ? 'Continua' : item.type === 'E' ? 'Entera' : 'Binaria'}.`;
            }
        });
        
        // Guardar progreso
        updateGlobalProgress(20, correctCount, 'badge1'); // Peso 20%
    }

    function checkLevel2() {
        // Respuestas correctas hardcoded para el demo
        const answers = [
            "Falta definir cantidad y tiempo",
            "x es una variable de salida, no de entrada",
            "Es muy espec铆fico",
            "Debe ser Entera",
            "Es un Par谩metro, no Variable"
        ];

        let correctCount = 0;
        answers.forEach((ans, index) => {
            const val = document.getElementById(`l2_q${index}`).value;
            const fb = document.getElementById(`l2_fb${index}`);
            fb.style.display = 'block';

            if(val === ans) {
                correctCount++;
                fb.className = 'feedback-box fb-correct';
                fb.innerText = "Diagn贸stico Correcto.";
            } else {
                fb.className = 'feedback-box fb-error';
                fb.innerText = `Error. El problema era: ${ans}`;
            }
        });

        updateGlobalProgress(30, correctCount * 2, 'badge2'); // Peso 30%
    }

    function revealCase(index) {
        document.getElementById(`case_fb_${index}`).style.display = 'block';
        // Simplemente por revelar y participar sumamos al progreso
        if(!state.l3_completed.includes(index)){
            state.l3_completed.push(index);
            updateGlobalProgress(50, state.l3_completed.length * 10, 'badge3'); // Peso 50%
        }
    }

    // --- UTILITIES & STORAGE ---

    function saveL1(index, val) {
        state.l1_answers[index] = val;
        saveProgress();
    }

    function updateGlobalProgress(weight, scoreRaw, badgeId) {
        // Simplificaci贸n: Calculamos un score global basado en interacciones
        // Este es un sistema b谩sico de puntaje
        state.score += 5; // Sumar puntos arbitrarios por interacci贸n para el demo
        saveProgress();
        updateUI();
    }

    function updateUI() {
        // Actualizar badges
        document.getElementById('badge1').innerText = Object.keys(state.l1_answers).length + "/20";
        document.getElementById('badge3').innerText = state.l3_completed.length + "/5";
        
        // Actualizar barra
        // Hacemos un c谩lculo aproximado de completitud
        let totalSteps = 20 + 5 + 5; // Drill + Debug + Cases
        let currentSteps = Object.keys(state.l1_answers).length + state.l3_completed.length; 
        
        let pct = Math.min(100, Math.floor((currentSteps / totalSteps) * 100));
        
        document.getElementById('globalProgress').style.width = pct + "%";
        document.getElementById('percentText').innerText = pct + "%";
        document.getElementById('finalScoreDisplay').innerText = pct; // Usamos % como score para simplificar
    }

    function saveProgress() {
        localStorage.setItem('univo_io_bootcamp', JSON.stringify(state));
    }

    function loadProgress() {
        const saved = localStorage.getItem('univo_io_bootcamp');
        if(saved) {
            state = JSON.parse(saved);
            // Restaurar inputs L1
            for(const [idx, val] of Object.entries(state.l1_answers)){
                let el = document.getElementById(`l1_q${idx}`);
                if(el) el.value = val;
            }
            // Restaurar L3 visualmente
            state.l3_completed.forEach(idx => {
                let el = document.getElementById(`case_fb_${idx}`);
                if(el) el.style.display = 'block';
            });
        }
    }

    function resetProgress() {
        if(confirm("驴Est谩s seguro de borrar todo tu progreso?")) {
            localStorage.removeItem('univo_io_bootcamp');
            location.reload();
        }
    }

</script>

</body>
</html>
